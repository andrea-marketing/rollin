<div class="container">
  <div class="row">
    <div class="col-12 col-md-6">
        <div style="width: 100%; height: 100vh; position:sticky;"
              data-controller="mapbox"
              data-mapbox-markers-value="<%= @markers.to_json %>"
              data-mapbox-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
        </div>
    </div>

    <div class="col-12 col-md-6">
    <div class="info">
      <div class="header">
        <p> Hello <i class="highlight"> <%=current_user.first_name %> </i>  👋🏼 !!</p>
        <h1> Let's find you <i class="highlight">a vehicle!</i> </h1>
      </div>

      <%= form_tag vehicles_path, method: :get do %>
        <%= text_field_tag :query,
          params[:query],
          class: "form-control",
          placeholder: "Find a vehicle"
        %>
        <%= submit_tag "Search", class: "btn btn-primary" %>
      <% end %>

      <h2>Categories</h2>

      <div class="filters">
        <p class="filter">🚲</p>
        <p class="filter">🛴</p>
        <p class="filter">🛹</p>
        <p class="filter">🛼</p>
        <p class="filter">⛸</p>
      </div>

      <h2>Vehicles</h2>
        <div class="cards">
          <% @vehicles.each do |vehicle| %>
            <%= link_to vehicle_path(vehicle) , :action => 'go' do %>
              <div class="card-vehicle">
                <% if vehicle.photo.attached? %>
                  <%= cl_image_tag vehicle.photo.key, height: 300, width: 400, crop: :fill %>
                <% end %>
                <div class="card-vehicle-infos">
                  <div>
                    <p><strong><%= vehicle.name %></strong></p>
                    <p><%= vehicle.description  %></p>
                  </div>
                  <p class="card-vehicle-pricing"><%=vehicle.price%>€</p>
                  <div class="filtered">
                    <% if vehicle.vehicle_type == "bike" %>
                      <p>🚲</p>
                    <% elsif vehicle.vehicle_type == "scooter" %>
                      <p>🛴</p>
                    <% elsif vehicle.vehicle_type == "skate" %>
                      <p>🛹</p>
                    <% elsif vehicle.vehicle_type == "rolling-skates" %>
                      <p>🛼</p>
                    <% else %>
                      <p>⛸</p>
                    <% end %>
                    </div>
                </div>
              </div>
            <% end %>
          <% end %>
    </div>
  </div>
</div>
